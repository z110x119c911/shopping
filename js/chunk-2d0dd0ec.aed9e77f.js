(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dd0ec"],{8086:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}}),a("div",{staticClass:"container"},[a("h2",{staticClass:"py-5"},[t._v("我的購物車")]),a("div",{staticClass:"row no-gutters"},[a("div",{staticClass:"col-12"},[a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.cartList.carts,(function(s){return a("tr",{key:s.id},[a("td",{staticClass:"align-middle"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"}},[a("i",{staticClass:"far fa-trash-alt",on:{click:function(a){return t.delCart(s.id)}}})])]),a("td",{staticClass:"align-middle"},[t._v(t._s(s.product.tilte))]),a("td",{staticClass:"align-middle"},[t._v(t._s(s.qty)+" "+t._s(s.product.unit))]),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(s.total)+" 元")])])})),0),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.cartList.total)+" 元 ")])]),t.cartList.final_total!==t.cartList.total?a("tr",[a("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價 : "),a("span",{staticStyle:{color:"black"}},[t._v(t._s(t.message))])]),a("td",{staticClass:"text-right text-success"},[t._v(" "+t._s(t._f("MathRound")(t.cartList.final_total))+" 元 ")])]):t._e()])])]),a("div",{staticClass:"col-12 py-5"},[a("div",{staticClass:"row no-gutters justify-content-center"},[a("div",{staticClass:"col-md-4 col-12"},[a("p",[t._v("有優惠券嗎？")]),a("div",{staticClass:"input-group mb-3 input-group-sm"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode.code,expression:"couponCode.code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.couponCode.code},on:{input:function(s){s.target.composing||t.$set(t.couponCode,"code",s.target.value)}}}),a("div",{staticClass:"input-group-append h-100"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.addCoupon()},click:function(s){return t.addCoupon()}}},[t._v(" 套用優惠碼 ")])])])])])])]),a("div",{staticClass:"row no-gutters justify-content-center py-4"},[a("ValidationObserver",{staticClass:"col-md-8 col-12",scopedSlots:t._u([{key:"default",fn:function(s){var e=s.invalid;return[a("form",{on:{submit:function(s){return s.preventDefault(),t.order(s)}}},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,o=s.classes;return[a("div",{staticClass:"form-group"},[a("label",[t._v("收件人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",class:o,attrs:{type:"text",name:"姓名",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(s){s.target.composing||t.$set(t.form.user,"name",s.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(e[0]))])])]}}],null,!0)}),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,o=s.classes;return[a("div",{staticClass:"form-group"},[a("label",[t._v("收件人電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",class:o,attrs:{type:"tel",name:"聯絡電話",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(s){s.target.composing||t.$set(t.form.user,"tel",s.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(e[0]))])])]}}],null,!0)}),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,o=s.classes;return[a("div",{staticClass:"form-group"},[a("label",[t._v("地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",class:o,attrs:{type:"text",name:"地址"},domProps:{value:t.form.user.address},on:{input:function(s){s.target.composing||t.$set(t.form.user,"address",s.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(e[0]))])])]}}],null,!0)}),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,o=s.classes;return[a("div",{staticClass:"form-group"},[a("label",[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",class:o,attrs:{name:"",id:"內容",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(s){s.target.composing||t.$set(t.form,"message",s.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(e[0]))])])]}}],null,!0)}),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-content",attrs:{disabled:e}},[t._v("送出訂單")])])],1)]}}])})],1)]),a("Footer")],1)},o=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("thead",[a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("單價")])])}],i=(a("99af"),a("076e")),r=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("nav",{staticClass:"col-md-3 col-lg-2 d-md-block bg-light"},[a("div",{staticClass:"pt-3"},[a("ul",{staticClass:"nav flex-column"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link link hvr-shutter-out-horizontal",attrs:{to:"/admin/products"}},[a("i",{staticClass:"fas fa-box-open"}),t._v(" 產品列表 ")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/admin/checkList"}},[a("i",{staticClass:"far fa-list-alt"}),t._v(" 訂單列表 ")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/admin/coupon"}},[a("i",{staticClass:"fas fa-ticket-alt"}),t._v(" 優惠券 ")])],1)])])])])},n=[],l={},c=l,u=a("2877"),d=Object(u["a"])(c,r,n,!1,null,null,null),p=d.exports,m={components:{Sidebar:p,Footer:i["a"]},data:function(){return{isLoading:!1,cartList:{},couponCode:{code:""},message:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCartList:function(){var t=this;t.isLoading=!0;var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("jamesapi1","/cart");this.$http.get(s).then((function(s){t.cartList=s.data.data,t.isLoading=!1}))},addCoupon:function(){var t=this;t.isLoading=!0;var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("jamesapi1","/coupon");this.$http.post(s,{data:t.couponCode}).then((function(s){s.data.success?(t.isLoading=!1,t.message=s.data.message,t.getCartList()):(t.isLoading=!1,alert(s.data.message),t.getCartList())}))},delCart:function(t){var s=this;s.isLoading=!0;var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("jamesapi1","/cart/").concat(t);this.$http.delete(a).then((function(t){s.isLoading=!1,s.getCartList()}))},order:function(){var t=this;t.isLoading=!0;var s=t.form,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("jamesapi1","/order");this.$http.post(a,{data:s}).then((function(s){s.data.success&&(t.isLoading=!1,t.$router.push("checkout/".concat(s.data.orderId)))}))}},created:function(){this.getCartList()}},v=m,f=Object(u["a"])(v,e,o,!1,null,null,null);s["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d0dd0ec.aed9e77f.js.map